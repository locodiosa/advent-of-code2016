<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script>
		"use strict";
    
    function calc() {      
      document.getElementById("result").innerHTML = getResult();      
    }  

    var e = [];      
    var floor1 = ["sg", "sm", "pg", "pm"];
    var floor2 = ["tg", "rg", "rm", "cg", "cm"];
    var floor3 = ["tm"];
    var floor4 = [];    

    function getResult() { 
      move();
      
    } 

    function bring() {
      e = floor1.splice(randomInteger(0, floor1.length - 1), randomInteger(1, 2));          
      
      if (e.length == 2) {
        checkCompatibility();
      } 
      return e;
    }

    function move() {
      var floor2New = floor2;
      floor2New.push(bring());
      floor2New = floor2New.join().split(",");

      if (checkCompatibilityOnFloor(floor2New) == true) {        
        console.log("move");

      } else {
        floor2 = floor2New;
        console.log(floor2New + " = " + floor2);
      }      
    }

    function randomInteger(min, max) {
      var rand = min - 0.5 + Math.random() * (max - min + 1);
      rand = Math.round(rand);
      return rand;
    }

    function checkCompatibility() {
      if (((e.indexOf("tg") != -1) && (e.indexOf("rm") != -1)) ||
          ((e.indexOf("tg") != -1) && (e.indexOf("cm") != -1)) ||
          ((e.indexOf("tg") != -1) && (e.indexOf("sm") != -1)) ||
          ((e.indexOf("tg") != -1) && (e.indexOf("pm") != -1)) ||
          ((e.indexOf("rg") != -1) && (e.indexOf("tm") != -1)) ||
          ((e.indexOf("rg") != -1) && (e.indexOf("cm") != -1)) ||
          ((e.indexOf("rg") != -1) && (e.indexOf("sm") != -1)) ||
          ((e.indexOf("rg") != -1) && (e.indexOf("pm") != -1)) ||
          ((e.indexOf("cg") != -1) && (e.indexOf("rm") != -1)) ||
          ((e.indexOf("cg") != -1) && (e.indexOf("tm") != -1)) ||
          ((e.indexOf("cg") != -1) && (e.indexOf("sm") != -1)) ||
          ((e.indexOf("cg") != -1) && (e.indexOf("pm") != -1)) ||
          ((e.indexOf("sg") != -1) && (e.indexOf("rm") != -1)) ||
          ((e.indexOf("sg") != -1) && (e.indexOf("tm") != -1)) ||
          ((e.indexOf("sg") != -1) && (e.indexOf("cm") != -1)) ||
          ((e.indexOf("sg") != -1) && (e.indexOf("pm") != -1)) ||
          ((e.indexOf("pg") != -1) && (e.indexOf("rm") != -1)) ||
          ((e.indexOf("pg") != -1) && (e.indexOf("tm") != -1)) ||
          ((e.indexOf("pg") != -1) && (e.indexOf("cm") != -1)) ||
          ((e.indexOf("pg") != -1) && (e.indexOf("sm") != -1))){
        bring();
      }
    }

  function checkCompatibilityOnFloor(floor) {
    if (((floor.indexOf("tg") != -1) && (floor.indexOf("tm") == -1)) && 
      (((floor.indexOf("cm") != -1) && (floor.indexOf("cg") == -1)) || 
       ((floor.indexOf("rm") != -1) && (floor.indexOf("rg") == -1)) || 
       ((floor.indexOf("sm") != -1) && (floor.indexOf("sg") == -1)) || 
       ((floor.indexOf("pm") != -1) && (floor.indexOf("pg") == -1))) ||

      ((floor.indexOf("rg") != -1) && (floor.indexOf("rm") == -1)) && 
      (((floor.indexOf("cm") != -1) && (floor.indexOf("cg") == -1)) || 
       ((floor.indexOf("tm") != -1) && (floor.indexOf("tg") == -1)) || 
       ((floor.indexOf("sm") != -1) && (floor.indexOf("sg") == -1)) || 
       ((floor.indexOf("pm") != -1) && (floor.indexOf("pg") == -1))) ||

      ((floor.indexOf("cg") != -1) && (floor.indexOf("cm") == -1)) && 
      (((floor.indexOf("tm") != -1) && (floor.indexOf("tg") == -1)) || 
       ((floor.indexOf("rm") != -1) && (floor.indexOf("rg") == -1)) || 
       ((floor.indexOf("sm") != -1) && (floor.indexOf("sg") == -1)) || 
       ((floor.indexOf("pm") != -1) && (floor.indexOf("pg") == -1))) ||

      ((floor.indexOf("sg") != -1) && (floor.indexOf("sm") == -1)) && 
      (((floor.indexOf("cm") != -1) && (floor.indexOf("cg") == -1)) || 
       ((floor.indexOf("rm") != -1) && (floor.indexOf("rg") == -1)) || 
       ((floor.indexOf("tm") != -1) && (floor.indexOf("tg") == -1)) || 
       ((floor.indexOf("pm") != -1) && (floor.indexOf("pg") == -1))) ||

      ((floor.indexOf("pg") != -1) && (floor.indexOf("pm") == -1)) && 
      (((floor.indexOf("cm") != -1) && (floor.indexOf("cg") == -1)) || 
       ((floor.indexOf("rm") != -1) && (floor.indexOf("rg") == -1)) || 
       ((floor.indexOf("sm") != -1) && (floor.indexOf("sg") == -1)) || 
       ((floor.indexOf("tm") != -1) && (floor.indexOf("tg") == -1)))) {
      console.log(floor);
      move();
      console.log(floor);
      return true;
    }
  }




  var input = `The first floor contains a strontium generator, a strontium-compatible microchip, a plutonium generator, and a plutonium-compatible microchip.
The second floor contains a thulium generator, a ruthenium generator, a ruthenium-compatible microchip, a curium generator, and a curium-compatible microchip.
The third floor contains a thulium-compatible microchip.
The fourth floor contains nothing relevant.`
	</script>
</head>
<body onload="calc()">
  <div id="result"></div>
</body>
</html>