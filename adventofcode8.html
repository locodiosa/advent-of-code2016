<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script>
		"use strict";

    var newScreen = initScreen(50, 6);
    var wide, tall, x, y, stepX, stepY;
    var counter = 0;

    function draw(newScreen) {
      var canvas  = document.getElementById("canvas");
      canvas.width  = newScreen.length * 10; 
      canvas.height = newScreen[0].length * 10; 
        
      var context = canvas.getContext('2d');
      context.fillStyle   = '#eee'; 
      context.fillRect(0, 0, canvas.width, canvas.height);  
        
      context.beginPath();
      getResult(context)
      context.stroke(); 
    }

    function calc() {      
      document.getElementById("result").innerHTML = draw(newScreen);      
    }  

    function fillScreen(context, newScreen, wide, tall) {        
      context.fillStyle = '#000';    
      for (var i = 0; i < wide; i++) {  

        for (var j = 0; j < tall; j++) {
          newScreen[i][j] = 1;
          counter++;
          var x = i * 10;
          var y = j * 10;
          context.fillRect(x,y,7,7);
        }
      } 
      console.log(counter);            
    }     

    function getResult(context) {   
      input.split("\n").forEach(function(line) {

        if (line.indexOf("rect") != -1) {
          wide = parseInt(line.slice(5, line.indexOf("x")));
          tall = parseInt(line.slice(line.indexOf("x") + 1));          
          fillScreen(context, newScreen, wide, tall);
        }      
        
        if (line.indexOf("rotate row") != -1) {         
          y = parseInt(line.slice(13, line.indexOf("b") - 1));         
          stepX = parseInt(line.slice(line.indexOf("b") + 3));           
          fillRow(context, newScreen, wide, y, stepX);          
        }

        if (line.indexOf("rotate column") != -1) {
          x = parseInt(line.slice(16, line.indexOf("b") - 1));         
          stepY = parseInt(line.slice(line.indexOf("b") + 3));           
          fillColumn(newScreen, tall, x, stepY);
          console.log(newScreen); 
        }

      });
      

      
    } 

    function initScreen(x, y) {
      var newScreen = new Array(x);

      for (var i = 0; i < newScreen.length; i++) {
        newScreen[i] = new Array(y);
      }

      for (var i = 0; i < newScreen.length; i++) {
        for (var j = 0; j < newScreen[i].length; j++) {
          newScreen[i][j] = 0;
        }
      }

      return newScreen;
    }

    function fillRow(context, newScreen, wide, y, stepX) {
      for (var i = 0; i < wide; i++) {                      
       
        if (i + stepX >= newScreen.length) {  
          newScreen[i][y] = 0; 
          x = i * 10;          
          context.fillStyle = '#eee';                   
          context.fillRect(x,y,7,7);   

          newScreen[i + stepX - newScreen.length][y] = 1;        
          var x = (i + stepX - newScreen.length) * 10;  
          var y = y * 10;
          context.fillStyle = '#000';  
          context.fillRect(x,y,7,7);          
          
        } else {
          newScreen[i + stepX][y] = 1; 
          x = (i + stepX) * 10;
          y = y * 10;
          context.fillStyle = '#000';  
          context.fillRect(x,y,7,7); 

          newScreen[i][y] = 0; 
          x = i * 10;          
          context.fillStyle = '#eee';                   
          context.fillRect(x,y,7,7);         
        }                         
        
        

             
      }          
    }

                  function fillColumn(newScreen, tall, x, stepY) {
                    for (var j = stepY; j < tall + stepY; j++) {    
                    
                      if (j >= newScreen.length) {     
                        console.log(j);
                        for (var i = 0; i < tall - (newScreen.length - stepY); i++) {

                          newScreen[i][x] = 1; 
                          console.log(newScreen[i][x]);
                        }  
                        j = 7;       
                      }
                      if (j == 7) break;
                      newScreen[j][x] = 1;       
                    }      
                  }

                  function turnRow(newScreen, y, stepX) {
                    for (var i = 0; i < newScreen.length; i++) {
                      if (newScreen[i][y] == 1) {
                        newScreen[i][y] = 0;
                        newScreen[i + stepX][y] = 1;
                      }
                    }
                  }

    
    

  var input = `rect 3x2
rotate row y=0 by 51`


	</script>
</head>
<body onload="calc()">
<div id="result"></div>
<canvas id="canvas"></canvas>

</body>
</html>